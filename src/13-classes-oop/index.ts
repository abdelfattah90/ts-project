/* =====================================================================================
 *                               TypeScript OOP & Classes (Ù†Ø³Ø®Ø© Ù…Ø¨Ø³Ø·Ø©)
 *                                   Ahmed â€“ Simplified Notes
 * ===================================================================================== */

/* ================================================================================
 * 1ï¸âƒ£ Ù…Ù‚Ø¯Ù…Ø© OOP ÙÙŠ TypeScript
 * -------------------------------------------------------------------------------
 * Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙƒØ§Ø¦Ù†ÙŠØ© (OOP) ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ÙƒÙˆØ¯ Ø¯Ø§Ø®Ù„ Classes ØªØ­ØªÙˆÙŠ:
 *  - Ø®ØµØ§Ø¦Øµ (Properties)
 *  - Ø¯ÙˆØ§Ù„ (Methods)
 * TypeScript ÙŠØ¶ÙŠÙ Typing + Access Modifiers ÙÙˆÙ‚ JavaScript.
 * ================================================================================ */

/* ================================================================================
 * 2ï¸âƒ£ ØªØ¹Ø±ÙŠÙ Class Ø¨Ø³ÙŠØ·
 * -------------------------------------------------------------------------------
 * Class = Ù‚Ø§Ù„Ø¨ Ù„Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù†Ø§Øª ØªØ­Ù…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª + Ø³Ù„ÙˆÙƒ.
 * ================================================================================ */

class User {
    name: string;
    email: string;

    constructor(name: string, email: string) {
        this.name = name;
        this.email = email;
    }

    greet() {
        console.log(`Hello ${this.name}`);
    }
}

const u1 = new User("Ahmed", "a@test.com");
u1.greet();

/* ================================================================================
 * 3ï¸âƒ£ Constructor ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… this
 * -------------------------------------------------------------------------------
 * constructor = Ø¯Ø§Ù„Ø© ØªÙÙ†ÙÙ‘ÙŽØ° Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ø¬Ø¯ÙŠØ¯.
 * ÙŠÙ…ÙƒÙ† Ø§Ø®ØªØµØ§Ø± Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… public Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€ constructor.
 * ================================================================================ */

class Product {
    constructor(public name: string, public price: number) { }
}

const p = new Product("Laptop", 5000);

/* ================================================================================
 * 4ï¸âƒ£ Modifiers â†’ public / private / protected
 * -------------------------------------------------------------------------------
 * public     â†’ Ù…ØªØ§Ø­ Ù„Ù„Ø¬Ù…ÙŠØ¹
 * private    â†’ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ„Ø§Ø³ ÙÙ‚Ø·
 * protected  â†’ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ„Ø§Ø³ ÙˆØ§Ù„ÙˆØ±Ø§Ø«Ø© ÙÙ‚Ø·
 * ================================================================================ */

class BankAccount {
    public owner: string;
    private balance: number = 0;
    protected currency: string = "USD";

    constructor(owner: string) {
        this.owner = owner;
    }

    deposit(amount: number) {
        this.balance += amount;
    }

    getBalance() {
        return this.balance;
    }
}

/* ================================================================================
 * 5ï¸âƒ£ readonly
 * -------------------------------------------------------------------------------
 * ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø®Ø§ØµÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·.
 * ================================================================================ */

class Settings {
    readonly version = "1.0";
}

/* ================================================================================
 * 6ï¸âƒ£ Getters & Setters
 * -------------------------------------------------------------------------------
 * ØªÙˆÙØ± Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø© Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù‚Ø±Ø§Ø¡Ø©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®ØµØ§Ø¦Øµ.
 * ================================================================================ */

class Person {
    private _age = 0;

    set age(v: number) {
        if (v >= 0) this._age = v;
    }

    get age() {
        return this._age;
    }
}

/* ================================================================================
 * 7ï¸âƒ£ Methods
 * -------------------------------------------------------------------------------
 * Ø¯ÙˆØ§Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒÙ„Ø§Ø³.
 * ================================================================================ */

class Calc {
    add(a: number, b: number) {
        return a + b;
    }
}

/* ================================================================================
 * 8ï¸âƒ£ Inheritance (Ø§Ù„ÙˆØ±Ø§Ø«Ø©)
 * -------------------------------------------------------------------------------
 * ÙƒÙ„Ø§Ø³ ÙŠØ±Ø« Ø®ØµØ§Ø¦Øµ ÙˆØ¯ÙˆØ§Ù„ ÙƒÙ„Ø§Ø³ Ø¢Ø®Ø±.
 * ================================================================================ */

class Animal {
    constructor(public name: string) { }
    move() {
        console.log(`${this.name} is moving`);
    }
}

class Dog extends Animal {
    bark() {
        console.log(`${this.name} barks`);
    }
}

/* ================================================================================
 * 9ï¸âƒ£ super()
 * -------------------------------------------------------------------------------
 * ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ constructor Ø§Ù„Ø£Ø¨.
 * ================================================================================ */

class Car {
    constructor(public brand: string) { }
}

class BMW extends Car {
    constructor() {
        super("BMW");
    }
}

/* ================================================================================
 * ðŸ”Ÿ Override
 * -------------------------------------------------------------------------------
 * Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹Ø±ÙŠÙ method Ù…Ù† Ø§Ù„ÙƒÙ„Ø§Ø³ Ø§Ù„Ø£Ø¨.
 * ================================================================================ */

class Shape {
    area(): number {
        return 0;
    }
}

class Square extends Shape {
    constructor(public size: number) {
        super();
    }
    override area(): number {
        return this.size * this.size;
    }
}

/* ================================================================================
 * 1ï¸âƒ£1ï¸âƒ£ Abstract Classes
 * -------------------------------------------------------------------------------
 * ÙƒÙ„Ø§Ø³ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù† Ù…Ù†Ù‡ØŒ ÙŠÙØ³ØªØ®Ø¯Ù… ÙƒÙ‚Ø§Ù„Ø¨.
 * ================================================================================ */

abstract class Vehicle {
    abstract move(): void;
    stop() {
        console.log("Stopped");
    }
}

class Bike extends Vehicle {
    move() {
        console.log("Bike moving...");
    }
}

/* ================================================================================
 * 1ï¸âƒ£2ï¸âƒ£ Interface vs Class
 * -------------------------------------------------------------------------------
 * interface ÙŠØ­Ø¯Ø¯ Ø´ÙƒÙ„ Ø§Ù„ÙƒØ§Ø¦Ù† ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ù…Ù†Ø·Ù‚.
 * class ÙŠØ­ØªÙˆÙŠ Ù…Ù†Ø·Ù‚ + Ø®ØµØ§Ø¦Øµ.
 * ================================================================================ */

interface Printable {
    print(): void;
}

class Report implements Printable {
    print() {
        console.log("Printing report...");
    }
}

/* ================================================================================
 * 1ï¸âƒ£3ï¸âƒ£ Static Members
 * -------------------------------------------------------------------------------
 * Ø®ØµØ§Ø¦Øµ ÙˆØ¯ÙˆØ§Ù„ ØªÙØ³ØªØ®Ø¯Ù… Ø¨Ø¯ÙˆÙ† Ø¥Ù†Ø´Ø§Ø¡ ÙƒØ§Ø¦Ù†.
 * ================================================================================ */

class MathUtils {
    static PI = 3.14;
    static add(a: number, b: number) {
        return a + b;
    }
}

console.log(MathUtils.PI);
console.log(MathUtils.add(2, 3));

/* ================================================================================
 * 1ï¸âƒ£4ï¸âƒ£ instanceof
 * -------------------------------------------------------------------------------
 * ÙŠØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒØ§Ø¦Ù† Ù†Ø§ØªØ¬Ù‹Ø§ Ù…Ù† ÙƒÙ„Ø§Ø³ Ù…Ø¹ÙŠÙ†.
 * ================================================================================ */

const dog = new Dog("Rex");
console.log(dog instanceof Dog);
console.log(dog instanceof Animal);

/* ================================================================================
 * 1ï¸âƒ£5ï¸âƒ£ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„Ø§Ø³Ø§Øª ÙÙŠ Angular
 * -------------------------------------------------------------------------------
 * ØªÙØ³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙ„Ø§Ø³Ø§Øª ÙƒÙ†Ù…Ø§Ø°Ø¬ (Models) ÙˆØ®Ø¯Ù…Ø§Øª (Services).
 * ================================================================================ */

class UserModel {
    constructor(
        public id: number,
        public name: string,
        public email: string
    ) { }
}

class UserService {
    getUser() {
        return new UserModel(1, "Ahmed", "a@test.com");
    }
}

/* ================================================================================
 * 1ï¸âƒ£6ï¸âƒ£ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ Ø´Ø§Ù…Ù„ â€“ Todo App Ø¨Ø³ÙŠØ·
 * -------------------------------------------------------------------------------
 * ØªÙˆØ¶ÙŠØ­ OOP Ø¹Ø¨Ø± Ù…Ø«Ø§Ù„ Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù….
 * ================================================================================ */

class TodoItem {
    constructor(public id: number, public title: string, public done = false) { }
}

class TodoList {
    private items: TodoItem[] = [];

    add(title: string) {
        const id = this.items.length + 1;
        this.items.push(new TodoItem(id, title));
    }

    toggle(id: number) {
        const item = this.items.find(i => i.id === id);
        if (item) item.done = !item.done;
    }

    getAll() {
        return this.items;
    }
}
