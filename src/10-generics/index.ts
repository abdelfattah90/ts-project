/********************************************************************************************
 *                                ğŸš€ TypeScript Generics Guide                              *
 *                                  ğŸ’¡ Ø´Ø±Ø­ Ù†Ø¸Ø±ÙŠ + ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù…Ù„ÙŠ                                *
 ********************************************************************************************/

/* =========================================================================================
 * 1ï¸âƒ£ Ù…Ø§ Ù‡ÙŠ GenericsØŸ  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ ØªØ¹Ø±ÙŠÙ:
 *    Ø§Ù„Ù€ Generics Ù‡ÙŠ Ø·Ø±ÙŠÙ‚Ø© Ù„ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ Ø¹Ø§Ù… (Reusable) Ø¨Ø¯ÙˆÙ† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù€ Type Safety.
 *
 * âœ”ï¸ Ù„Ù…Ø§Ø°Ø§ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ØŸ
 *    - Ù„ØªÙ‚Ù„ÙŠÙ„ ØªÙƒØ±Ø§Ø± Ø§Ù„ÙƒÙˆØ¯
 *    - Ù„Ù…Ø±ÙˆÙ†Ø© Ø£ÙƒØ¨Ø± Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù†ÙˆØ¹ÙŠ
 *    - Ù„ØªÙØ§Ø¯ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… any âŒ
 *
 * âœ”ï¸ Ø£ÙŠÙ† Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ØŸ
 *    - Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ØŒ Ø§Ù„ÙƒÙ„Ø§Ø³Ø§ØªØŒ Ø§Ù„Ø¥Ù†ØªØ±ÙÙŠØ³
 *    - ÙÙŠ API Responses
 *    - Ù‡ÙŠØ§ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø«Ù„ Stack ÙˆQueue
 *
 * âœ”ï¸ Ù…ØªÙ‰ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ØŸ
 *    - Ø¹Ù†Ø¯Ù…Ø§ Ù†Ø­ØªØ§Ø¬ Ø¯Ø§Ù„Ø© ØªØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙƒØ«Ø± Ù…Ù† Ù†ÙˆØ¹
 *    - Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„ ÙˆØ§Ù„Ù…Ø®Ø±Ø¬ Ù…Ø±ØªØ¨Ø·ÙŠÙ†
 * =========================================================================================*/

function identity<T>(value: T): T {
    return value;
}

const idNum = identity(10);
const idStr = identity("Hello");
const idArr = identity([1, 2, 3]);


/* =========================================================================================
 * 2ï¸âƒ£ Generic Functions Ù…Ø¹ Arrays
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Ø§Ù„ÙÙƒØ±Ø©:
 *    ÙƒØªØ§Ø¨Ø© Ø¯ÙˆØ§Ù„ ØªØ¹Ù…Ù„ Ù…Ø¹ Arrays Ù…Ù† Ø£ÙŠ Ù†ÙˆØ¹ Ø¨Ø¯ÙˆÙ† ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù†ÙˆØ¹ÙŠ.
 *
 * âœ”ï¸ Ù…Ø«Ø§Ù„: Ø¥Ø±Ø¬Ø§Ø¹ Ø£ÙˆÙ„ Ø¹Ù†ØµØ± ÙÙŠ Array
 * =========================================================================================*/

function getFirst<T>(arr: T[]): T | undefined {
    return arr[0];
}

const f1 = getFirst([1, 2, 3]);
const f2 = getFirst(["a", "b"]);


/* =========================================================================================
 * 3ï¸âƒ£ Multiple Type Parameters  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Ù†Ø³ØªØ®Ø¯Ù… Ø£ÙƒØ«Ø± Ù…Ù† Generic Type Ù…Ø«Ù„ <T, U>
 * âœ”ï¸ Ù…ÙÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù‚ÙŠÙ… Ù…Ø®ØªÙ„ÙØ© Ø§Ù„Ø£Ù†ÙˆØ§Ø¹.
 * =========================================================================================*/

function pair<T, U>(a: T, b: U): [T, U] {
    return [a, b];
}

const pr = pair("Age", 25);


/* =========================================================================================
 * 4ï¸âƒ£ Generic Constraints (extends)
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Ø§Ù„Ù‡Ø¯Ù:
 *    ÙØ±Ø¶ Ù‚ÙŠÙˆØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆØ¹ØŒ Ù…Ø«Ù„: Ø§Ù„Ù†ÙˆØ¹ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø®Ø§ØµÙŠØ© length.
 *
 * âœ”ï¸ Ù„Ù…Ø§Ø°Ø§ØŸ
 *    Ù„Ù…Ù†Ø¹ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø¹Ù†Ø¯ ÙˆØµÙˆÙ„ Ù†ÙˆØ¹ Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.
 * =========================================================================================*/

function logLength<T extends { length: number }>(item: T) {
    console.log("Length:", item.length);
}

logLength("Ahmed");
logLength([1, 2, 3]);

// Constraint + interface
interface HasId {
    id: number;
}

function findById<T extends HasId>(items: T[], id: number): T | undefined {
    return items.find(i => i.id === id);
}


/* =========================================================================================
 * 5ï¸âƒ£ keyof Constraint
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ ÙŠØ³Ù…Ø­ Ø¨Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù†ÙˆØ¹ K Ø£Ø­Ø¯ Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ÙƒØ§Ø¦Ù† T.
 * âœ”ï¸ Ù…ÙÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø®ØµØ§Ø¦Øµ object Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø©.
 * =========================================================================================*/

function getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {
    return obj[key];
}

const userObj = { id: 1, name: "Ahmed", age: 25 };
const uname = getProperty(userObj, "name");


/* =========================================================================================
 * 6ï¸âƒ£ Generic Interfaces
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ ØªØ³ØªØ®Ø¯Ù… Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù†Ù…Ø§Ø°Ø¬ Ù…Ø±Ù†Ø© ØªØ¹Ù…Ù„ Ù…Ø¹ Ø£Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„ÙØ©.
 * =========================================================================================*/

interface Box<T> {
    value: T;
    setValue(v: T): void;
    getValue(): T;
}

const numBox: Box<number> = {
    value: 10,
    setValue(v) { this.value = v; },
    getValue() { return this.value; }
};


/* =========================================================================================
 * 7ï¸âƒ£ Generic Classes  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Ø§Ù„ÙƒÙ„Ø§Ø³Ø§Øª Ø§Ù„Ø¬Ù†Ø±ÙŠÙƒ ØªØ³Ù…Ø­ Ø¨Ø¨Ù†Ø§Ø¡ Ù‡ÙŠØ§ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ùˆ Services Ù…Ø±Ù†Ø©.
 * =========================================================================================*/

class Container<T> {
    constructor(private value: T) { }

    getValue(): T {
        return this.value;
    }

    setValue(v: T) {
        this.value = v;
    }
}

const c1 = new Container(100);


/* =========================================================================================
 * 8ï¸âƒ£ Default Type Parameters  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ ÙŠÙ…ÙƒÙ†Ùƒ ÙˆØ¶Ø¹ Ù†ÙˆØ¹ Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙ‚Ø¯Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†ÙˆØ¹Ù‹Ø§.
 * =========================================================================================*/

interface ApiResponse<T = any> {
    data: T;
    status: number;
}

const res1: ApiResponse<string> = { data: "ok", status: 200 };
const res2: ApiResponse = { data: { id: 1 }, status: 200 };


/* =========================================================================================
 * 9ï¸âƒ£ Generics ÙÙŠ Angular  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Ù…Ù‡Ù…Ø© Ø¬Ø¯Ù‹Ø§ Ù„ÙÙ‡Ù… Services Ùˆ HttpClient Ùˆ RxJS.
 * âœ”ï¸ Ù…Ø«Ø§Ù„ Ù…Ø¨Ø³Ø· Ù„Ø®Ø¯Ù…Ø© Ø¹Ø§Ù…Ø© ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Generics.
 * =========================================================================================*/

interface Entity {
    id: number;
}

class GenericService<T extends Entity> {
    private items: T[] = [];

    add(item: T) {
        this.items.push(item);
    }

    getById(id: number): T | undefined {
        return this.items.find(i => i.id === id);
    }
}


/* =========================================================================================
 * ğŸ”Ÿ ØªÙ…Ø±ÙŠÙ† Ø¨Ø³ÙŠØ· â€” Generic Stack  
 * -----------------------------------------------------------------------------------------
 * âœ”ï¸ Stack ÙŠØ¹Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ù†ÙˆØ¹: string, number, object
 * =========================================================================================*/

class Stack<T> {
    private items: T[] = [];

    push(item: T) {
        this.items.push(item);
    }

    pop(): T | undefined {
        return this.items.pop();
    }

    peek(): T | undefined {
        return this.items[this.items.length - 1];
    }
}

const s = new Stack<string>();
s.push("A");
s.push("B");
console.log(s.peek()); // "B"


/********************************************************************************************
 * ğŸ¯ Ø§Ù†ØªÙ‡Ù‰ â€” Ù‡Ø°Ù‡ Ø§Ù„Ù†Ø³Ø®Ø© Ù…Ù†Ø¸Ù…Ø© + Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ…Ø°ÙƒØ±Ø© Ø£Ø³Ø§Ø³ÙŠØ©  
 ********************************************************************************************/
